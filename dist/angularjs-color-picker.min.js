/*!
 * angularjs-color-picker v1.0.1
 * https://github.com/ruhley/angular-color-picker/
 *
 * Copyright 2016 ruhley
 *
 * 2016-02-11 09:43:17
 *
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="color.picker"),function(){"use strict";angular.module("color.picker",[])}(),function(){"use strict";var o=function(o){return{restrict:"E",require:["^ngModel"],scope:{ngModel:"=",showColorPicker:"=",colorPickerAlpha:"=",colorPickerCase:"=",colorPickerFormat:"=",colorPickerPos:"=",colorPickerSwatch:"=",colorPickerSwatchOnly:"=",colorPickerSwatchPos:"=",colorPickerSwatchBootstrap:"=",colorPickerOnChange:"&"},templateUrl:"template/color-picker/directive.html",link:function(e,t,c,i){e.onChangeValue=null,e.init=function(){if(void 0===e.ngModel)e.hue=0,e.saturation=0,e.lightness=100;else{var t=tinycolor(e.ngModel);if(t.isValid()){var c=t.toHsv();e.hue=c.h,e.saturation=100*c.s,e.lightness=100*c.v,e.opacity=100*c.a}}e.initConfig(),o.on("mousedown",e.onMouseDown),o.on("mouseup",e.onMouseUp),o.on("mousemove",e.onMouseMove),e.find(".color-picker-grid").on("click",e.onColorClick),e.find(".color-picker-hue").on("click",e.onHueClick),e.find(".color-picker-opacity").on("click",e.onOpacityClick)},e.onMouseDown=function(o){e.find(o.target).length>0&&(o.target.classList.contains("color-picker-grid-inner")||o.target.classList.contains("color-picker-picker")||o.target.parentNode.classList.contains("color-picker-picker")?(e.colorDown(o),e.$apply()):o.target.classList.contains("color-picker-hue")||o.target.parentNode.classList.contains("color-picker-hue")?(e.hueDown(o),e.$apply()):(o.target.classList.contains("color-picker-opacity")||o.target.parentNode.classList.contains("color-picker-opacity"))&&(e.opacityDown(o),e.$apply()))},e.onMouseUp=function(o){e.colorMouse||e.hueMouse||e.opacityMouse||0!==e.find(o.target).length?e.colorMouse?(e.colorUp(o),e.$apply(),e.onChange(o)):e.hueMouse?(e.hueUp(o),e.$apply(),e.onChange(o)):e.opacityMouse&&(e.opacityUp(o),e.$apply(),e.onChange(o)):e.log("Color Picker: Document Click Event")},e.onMouseMove=function(o){e.colorMouse?(e.colorChange(o),e.$apply()):e.hueMouse?(e.hueChange(o),e.$apply()):e.opacityMouse&&(e.opacityChange(o),e.$apply())},e.onColorClick=function(o){e.colorChange(o),e.$apply(),e.onChange(o)},e.onHueClick=function(o){e.hueChange(o),e.$apply(),e.onChange(o)},e.onOpacityClick=function(o){e.opacityChange(o),e.$apply(),e.onChange(o)},e.onChange=function(o){e.ngModel!==e.onChangeValue&&(e.onChangeValue=e.ngModel,e.colorPickerOnChange({$event:o,color:e.ngModel}))},e.initConfig=function(){e.config={},e.config.alpha=void 0===e.colorPickerAlpha?!0:e.colorPickerAlpha,e.config["case"]=void 0===e.colorPickerCase?"upper":e.colorPickerCase,e.config.format=void 0===e.colorPickerFormat?"hsl":e.colorPickerFormat,e.config.pos=void 0===e.colorPickerPos?"bottom left":e.colorPickerPos,e.config.swatch=void 0===e.colorPickerSwatch?!0:e.colorPickerSwatch,e.config.swatchOnly=void 0===e.colorPickerSwatchOnly?!1:e.colorPickerSwatchOnly,e.config.swatchPos=void 0===e.colorPickerSwatchPos?"left":e.colorPickerSwatchPos,e.config.swatchBootstrap=void 0===e.colorPickerSwatchBootstrap?!0:e.colorPickerSwatchBootstrap,e.log("Color Picker: Config",e.config)},e.focus=function(){e.log("Color Picker: Focus Event"),e.find(".color-picker-input")[0].focus()},e.show=function(){e.log("Color Picker: Show Event"),e.visible=!0,e.hueMouse=!1,e.opacityMouse=!1,e.colorMouse=!1,e.saturationUpdate(),e.lightnessUpdate()},e.hide=function(){(e.visible||null!==t[0].querySelector(".color-picker-panel").offsetParent)&&(e.log("Color Picker: Hide Event"),e.visible=!1)},e.update=function(){if(void 0!==e.hue&&void 0!==e.saturation&&void 0!==e.lightness){var o,t=tinycolor({h:e.hue,s:e.saturation/100,v:e.lightness/100});switch(e.config.alpha&&t.setAlpha(e.opacity/100),e.log("Color Picker: COLOR CHANGED TO ",t,e.hue,e.saturation,e.lightness,e.opacity),e.swatchColor=t.toHslString(),e.config.format){case"rgb":o=t.toRgbString();break;case"hex":o=t.toHexString(),o="lower"===e.config["case"]?o.toLowerCase():o.toUpperCase();break;case"hex8":o=t.toHex8String(),o="lower"===e.config["case"]?o.toLowerCase():o.toUpperCase();break;case"hsv":o=t.toHsvString();break;default:o=t.toHslString()}e.ngModel=o}},e.$watch("ngModel",function(o,t){if(void 0!==o&&null!==o&&o!==t&&o.length>4){e.log("Color Picker: MODEL - CHANGED",o);var n=tinycolor(o);if(n.isValid()){var r=n.toHsv();e.hue=r.h,e.saturation=100*r.s,e.lightness=100*r.v,e.config.alpha&&(e.opacity=100*r.a),e.isValid=!0}else e.isValid=!1;i[0].$setValidity(c.name,e.isValid),void 0!==t&&"function"==typeof i[0].$setDirty&&i[0].$setDirty()}else e.swatchColor=""}),e.$watch("showColorPicker",function(o,t){void 0!==o&&(o?e.show():e.hide())}),e.$watch("colorPickerFormat",function(o,t){void 0!==o&&o!==t&&("hex"===o&&(e.colorPickerAlpha=!1),e.initConfig(),e.update())}),e.$watchGroup(["colorPickerAlpha","colorPickerCase"],function(o,t){void 0!==o&&(e.initConfig(),e.update())}),e.$watchGroup(["colorPickerSwatchPos","colorPickerSwatchBootstrap","colorPickerSwatchOnly","colorPickerSwatch","colorPickerPos"],function(o,t){void 0!==o&&e.initConfig()}),e.$watch("swatchColor",function(o){var e=angular.element(t[0].querySelector(".color-picker-swatch"));e.css({"background-color":o})}),e.$watch("huePos",function(o){var e=angular.element(t[0].querySelector(".color-picker-hue .color-picker-slider"));e.css({top:o+"%"})}),e.$watch("opacityPos",function(o){var e=angular.element(t[0].querySelector(".color-picker-opacity .color-picker-slider"));e.css({top:o+"%"})}),e.$watch("lightnessPos",function(o){var e=angular.element(t[0].querySelector(".color-picker-grid .color-picker-picker"));e.css({top:o+"%"})}),e.$watch("saturationPos",function(o){var e=angular.element(t[0].querySelector(".color-picker-grid .color-picker-picker"));e.css({left:o+"%"})}),e.$watch("grid",function(o){var e=angular.element(t[0].querySelector(".color-picker-grid"));e.css({"background-color":o})}),e.hueDown=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: HUE - MOUSE DOWN"),e.hueMouse=!0},e.hueUp=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: HUE - MOUSE UP"),e.hueMouse=!1},e.hueChange=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: HUE - MOUSE CHANGE");var t=e.find(".color-picker-hue");e.hue=360*(1-(o.pageY-e.offset(t).top)/t.prop("offsetHeight")),e.hue>360?e.hue=360:e.hue<0&&(e.hue=0)},e.hueUpdate=function(){void 0!==e.hue&&(e.log("Color Picker: HUE - CHANGED"),e.huePos=100*(1-e.hue/360),e.grid=tinycolor({h:e.hue,s:100,v:1}).toHslString(),e.huePos<0?e.huePos=0:e.huePos>100&&(e.huePos=100),e.update())},e.$watch("hue",function(o,t){e.hueUpdate()}),e.opacityDown=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: OPACITY - MOUSE DOWN"),e.opacityMouse=!0},e.opacityUp=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: OPACITY - MOUSE UP"),e.opacityMouse=!1},e.opacityChange=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: OPACITY - MOUSE CHANGE");var t=e.find(".color-picker-opacity");e.opacity=100*(1-(o.pageY-e.offset(t).top)/t.prop("offsetHeight")),e.opacity>100?e.opacity=100:e.opacity<0&&(e.opacity=0)},e.opacityUpdate=function(){void 0!==e.opacity&&(e.log("Color Picker: OPACITY - CHANGED"),e.opacityPos=100*(1-e.opacity/100),e.opacityPos<0?e.opacityPos=0:e.opacityPos>100&&(e.opacityPos=100),e.update())},e.$watch("opacity",function(o,t){e.opacityUpdate()}),e.colorDown=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: COLOR - MOUSE DOWN"),e.colorMouse=!0},e.colorUp=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: COLOR - MOUSE UP"),e.colorMouse=!1},e.colorChange=function(o){o.stopPropagation(),o.preventDefault(),e.log("Color Picker: COLOR - MOUSE CHANGE");var t=e.find(".color-picker-grid-inner"),c=e.offset(t);e.saturation=(o.pageX-c.left)/t.prop("offsetWidth")*100,e.lightness=100*(1-(o.pageY-c.top)/t.prop("offsetHeight")),e.saturation>100?e.saturation=100:e.saturation<0&&(e.saturation=0),e.lightness>100?e.lightness=100:e.lightness<0&&(e.lightness=0)},e.saturationUpdate=function(o){void 0!==e.saturation&&e.saturation!==o&&(e.log("Color Picker: SATURATION - CHANGED"),e.saturationPos=e.saturation/100*100,e.saturationPos<0?e.saturationPos=0:e.saturationPos>100&&(e.saturationPos=100),e.update())},e.$watch("saturation",function(o,t){e.saturationUpdate(t)}),e.lightnessUpdate=function(o){void 0!==e.lightness&&e.lightness!==o&&(e.log("Color Picker: LIGHTNESS - CHANGED"),e.lightnessPos=100*(1-e.lightness/100),e.lightnessPos<0?e.lightnessPos=0:e.lightnessPos>100&&(e.lightnessPos=100),e.update())},e.$watch("lightness",function(o,t){e.lightnessUpdate(t)}),e.log=function(){},e.find=function(o){var c,i=e.wrapper?e.wrapper[0]:t[0],n=[];if(!o)return n;if("string"==typeof o){if(1!==(c=i.nodeType)&&9!==c)return[];n=i.querySelectorAll(o)}else i.contains(o)&&n.push(o);return angular.element(n)},e.offset=function(o){var e,t,c,i,n=o[0];if(n)return n.getClientRects().length?(c=n.getBoundingClientRect(),c.width||c.height?(i=n.ownerDocument,t=null!==i&&i===i.window?i:9===i.nodeType&&i.defaultView,e=i.documentElement,window.chrome&&screen.width<=768?{top:c.top-e.clientTop,left:c.left-e.clientLeft}:{top:c.top+t.pageYOffset-e.clientTop,left:c.left+t.pageXOffset-e.clientLeft}):c):{top:0,left:0}},e.init(),e.$on("$destroy",function(){o.off("mousedown",e.onMouseDown),o.off("mouseup",e.onMouseUp),o.off("mousemove",e.onMouseMove)})}}};o.$inject=["$document"],angular.module("color.picker").directive("colorPicker",o)}(),angular.module("color.picker").run(["$templateCache",function(o){o.put("template/color-picker/directive.html",'<div class="color-picker-wrapper" ng-class="{\'color-picker-swatch-only\': config.swatchOnly}">\n   <div class="color-picker-input-wrapper" ng-class="{\'input-group\': config.swatchBootstrap && config.swatch}">\n       <span ng-if="config.swatchPos === \'left\'" class="color-picker-swatch" ng-click="focus()" ng-show="config.swatch" ng-class="{\'color-picker-swatch-left\': config.swatchPos !== \'right\', \'color-picker-swatch-right\': config.swatchPos === \'right\', \'input-group-addon\': config.swatchBootstrap}"></span>\n       <input class="color-picker-input form-control" type="text" ng-model="ngModel" ng-change="onChange($event)" size="7" ng-focus="show()" ng-class="{\'color-picker-input-swatch\': config.swatch && !config.swatchOnly && config.swatchPos === \'left\'}">\n       <span ng-if="config.swatchPos === \'right\'" class="color-picker-swatch" ng-click="focus()" ng-show="config.swatch" ng-class="{\'color-picker-swatch-left\': config.swatchPos !== \'right\', \'color-picker-swatch-right\': config.swatchPos === \'right\', \'input-group-addon\': config.swatchBootstrap}"></span>\n   </div>\n   <div class="color-picker-panel" ng-show="visible" ng-class="{\n       \'color-picker-panel-top color-picker-panel-right\': config.pos === \'top right\',\n       \'color-picker-panel-top color-picker-panel-left\': config.pos === \'top left\',\n       \'color-picker-panel-bottom color-picker-panel-right\': config.pos === \'bottom right\',\n       \'color-picker-panel-bottom color-picker-panel-left\': config.pos === \'bottom left\',\n   }">\n   <span class="ion-reply"></span>\n       <div class="color-picker-hue color-picker-sprite">\n           <div class="color-picker-slider"></div>\n       </div>\n       <div class="color-picker-opacity color-picker-sprite" ng-show="config.alpha">\n           <div class="color-picker-slider"></div>\n           </div>\n       <div class="color-picker-grid color-picker-sprite">\n           <div class="color-picker-grid-inner"></div>\n           <div class="color-picker-picker">\n               <div></div>\n           </div>\n       </div>\n   </div>\n</div>')}]);